(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),u=n.n(c),o=n(2),l=n(3),i=n.n(l),m="/api/persons",f=function(){return i.a.get(m).then(function(e){return e.data})},d=function(e){return i.a.post(m,e).then(function(e){return e.data})},s=function(e,t){return i.a.put("".concat(m,"/").concat(e),t).then(function(e){return e.data})},h=function(e){return i.a.delete("".concat(m,"/").concat(e)).then(function(e){return e.data})},b=function(e){var t=e.type,n=e.text;return"h2"===t?r.a.createElement("h2",null,n):r.a.createElement("h3",null,n)},p=function(e){var t=e.onChange,n=e.value;return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"filter"},"Filter shown with:"),r.a.createElement("input",{id:"filter",type:"text",onChange:t,value:n}))},v=function(e){var t=e.handleSubmit,n=e.handleNameChange,a=e.handleNumberChange,c=e.newName,u=e.newNumber;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"name"},"Name: "),r.a.createElement("input",{id:"name",type:"text",onChange:n,value:c,required:!0})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"number"},"Number: "),r.a.createElement("input",{id:"number",type:"text",onChange:a,value:u,required:!0})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},E=function(e){var t=e.persons,n=e.onClick;return r.a.createElement("div",null,t.map(function(e){return r.a.createElement("p",{key:e.id,className:"person"},e.name," ",e.number," \xa0",r.a.createElement("button",{onClick:function(){return n(e)}},"delete"))}))},w=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:t.type},t.text)},g=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),l=Object(o.a)(u,2),i=l[0],m=l[1],g=Object(a.useState)(""),y=Object(o.a)(g,2),C=y[0],x=y[1],N=Object(a.useState)(""),j=Object(o.a)(N,2),O=j[0],k=j[1],S=Object(a.useState)([]),L=Object(o.a)(S,2),F=L[0],I=L[1],q=Object(a.useState)(null),A=Object(o.a)(q,2),D=A[0],J=A[1];Object(a.useEffect)(function(){f().then(function(e){return c(e)})},[]);var B=function(){return function(e){return!!window.confirm("Delete ".concat(e.name," ?"))&&h(e.id).then(function(){c(n.filter(function(t){return t.id!==e.id})),P()}).catch(function(t){c(n.filter(function(t){return t.id!==e.id})),T({text:"Information of ".concat(i," has already been removed from the server"),type:"error"})})}},P=function(){m(""),x(""),k(""),I([])},T=function(e){J(e),setTimeout(function(){return J(null)},5e3)};return r.a.createElement("div",null,r.a.createElement(w,{message:D}),r.a.createElement(b,{type:"h2",text:"Phonebook"}),r.a.createElement(p,{onChange:function(e){k(e.target.value),I(n.filter(function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}))},value:O}),r.a.createElement(b,{type:"h3",text:"Add a New"}),r.a.createElement(v,{handleSubmit:function(e){e.preventDefault();var t={name:i,number:C},a=n.filter(function(e){return e.name.toLowerCase()===i.toLowerCase()});a.length?window.confirm("".concat(i," is already added to the phonebook, replace the old number with a new one?"))&&s(a[0].id,t).then(function(e){c(n.map(function(t){return t.name.toLowerCase()!==i.toLowerCase()?t:e})),T({text:"Updated ".concat(i),type:"success"})}).catch(function(e){c(n.filter(function(e){return e.name!==i})),T({text:"Information of ".concat(i," has already been removed from the server"),type:"error"})}):d(t).then(function(e){c(n.concat(e)),T({text:"Added ".concat(i),type:"success"})}).catch(function(e){return T({text:e.response.data.err,type:"error"})}),P()},handleNameChange:function(e){m(e.target.value)},handleNumberChange:function(e){x(e.target.value)},newName:i,newNumber:C}),r.a.createElement(b,{type:"h3",text:"Numbers"}),F.length?r.a.createElement(E,{persons:F,onClick:B()}):r.a.createElement(E,{persons:n,onClick:B()}))};n(37);u.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.a16290f5.chunk.js.map